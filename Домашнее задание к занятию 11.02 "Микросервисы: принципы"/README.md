
# Домашнее задание к занятию "Микросервисы: принципы"

Вы работаете в крупной компанию, которая строит систему на основе микросервисной архитектуры.
Вам как DevOps специалисту необходимо выдвинуть предложение по организации инфраструктуры, для разработки и эксплуатации.

## Задача 1: API Gateway

Предложите решение для обеспечения реализации API Gateway. Составьте сравнительную таблицу возможностей различных программных решений. На основе таблицы сделайте выбор решения.

Решение должно соответствовать следующим требованиям:
- Маршрутизация запросов к нужному сервису на основе конфигурации
- Возможность проверки аутентификационной информации в запросах
- Обеспечение терминации HTTPS

| Готовое решение    | Маршрутизация запросов на основе конфигурации | Возможность проверки аутентификационной информации в запросах | Обеспечение терминации HTTPS |
|--------------------|-----------------------------------------------|---------------------------------------------------------------|------------------------------|
| Kong Gateway       |                       +                       |                               +                               |               +              |
| Gloo               |                       +                       |                               +                               |               +              |
| Istio              |                       +                       |                               +                               |               +              |

В целом все из приведенных сервисов удовлетворяют условиям. На мой взгляд стоит сосредоточится на istio. Достаточно гибкая настройка роутов. Сложна для освоения на начальном этапе.


## Задача 2: Брокер сообщений

Составьте таблицу возможностей различных брокеров сообщений. На основе таблицы сделайте обоснованный выбор решения.

Решение должно соответствовать следующим требованиям:
- Поддержка кластеризации для обеспечения надежности
- Хранение сообщений на диске в процессе доставки
- Высокая скорость работы
- Поддержка различных форматов сообщений
- Разделение прав доступа к различным потокам сообщений
- Протота эксплуатации

| Брокер сообщений | Поддержка кластеризации | Хранение сообщений на диске в процессе доставки | Высокая скорость работы | Поддержка различных форматов сообщений | Разделение прав доступа к различным потокам сообщений | Простота эксплуатации |
|------------------|-------------------------|-------------------------------------------------|-------------------------|----------------------------------------|-------------------------------------------------------|-----------------------|
| Kafka            |            +            |                        +                        |            +            |                    +                   |                           +                           |           +           |
| Redis            |            +            |                        +                        |            +            |                    +                   |                           +                           |           +           |
| RabbitMQ         |            +            |                        +                        |            +            |                    +                   |                           +                           |           +           |

Я бы выбирал между Kafka и RabbitMQ исходя от требований ТЗ и возможностей оборудования. В целом RabbitMQ - это гибкость маршрутизации и отсутствие порядка сообщений. Kafka хорошо подходит если работаеть с большими нагрузками и там где важна масштабируемость, доставка сообщений в правильном порядке и возможность просматривать историю сообщений.

Обоснуйте свой выбор.